<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion</title>
    <style>
        .error { color: red; }
    </style>
</head>
<body>
    <h1>Connexion</h1>
    <form id="loginForm">
        <div>
            <label for="email">Email :</label>
            <input type="email" id="email" name="email" required>
            <span id="emailError" class="error"></span>
        </div>
        <div>
            <label for="password">Mot de passe :</label>
            <input type="password" id="password" name="password" required>
            <span id="passwordError" class="error"></span>
        </div>
        <button type="submit">Se connecter</button>
    </form>

    <script>
        const form = document.getElementById('loginForm');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const emailError = document.getElementById('emailError');
        const passwordError = document.getElementById('passwordError');

        const validateEmail = async (email) => {
            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                throw new Error('Email invalide');
            }
        };

        const validatePassword = async (password) => {
            if (password.length < 8) {
                throw new Error('Le mot de passe doit contenir au moins 8 caractères');
            }
        };

        emailInput.addEventListener('input', async () => {
            try {
                await validateEmail(emailInput.value);
                emailError.textContent = '';
            } catch (error) {
                emailError.textContent = error.message;
            }
        });

        passwordInput.addEventListener('input', async () => {
            try {
                await validatePassword(passwordInput.value);
                passwordError.textContent = '';
            } catch (error) {
                passwordError.textContent = error.message;
            }
        });

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            try {
                await validateEmail(emailInput.value);
                await validatePassword(passwordInput.value);
                console.log('Formulaire valide, envoi des données...');
            } catch (error) {
                console.error('Erreur de validation:', error.message);
            }
        });
    </script>
</body>
</html>